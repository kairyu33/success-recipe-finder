# 📚 note記事検索システム

note.com記事のCSV取り込み・検索・管理システムです。AI機能を廃止し、シンプルなCSVベースの記事管理システムに変更しました。

## ✨ 主な機能

### 1. CSV取り込み機能
- CSVファイルから記事データを一括インポート
- noteリンクの重複チェック（重複は自動スキップ）
- インポート結果の詳細レポート表示

### 2. 記事検索・閲覧機能
- キーワード検索（タイトル、ジャンル、メリット）
- ジャンル別フィルタリング
- カード形式の見やすい表示
- 記事詳細情報の表示（文字数、読了時間、対象読者など）

### 3. 管理画面
- 記事一覧表示
- 記事の個別編集
- 記事の削除
- CSVの追加インポート
- リアルタイム検索

## 🚀 使い方

### 1. 開発サーバーの起動

```bash
cd note-hashtag-ai-generator
npm run dev
```

サーバーが起動したら、ブラウザで以下にアクセス：
- メインページ: http://localhost:3000
- 記事一覧: http://localhost:3000/articles
- 管理画面: http://localhost:3000/admin

### 2. CSVファイルのインポート

#### CSVファイルの形式

CSVファイルは以下の列を含む必要があります：

```csv
行番号,タイトル,noteリンク,投稿日時,文字数,推定読了時間（分）,ジャンル,ユーザ層,メリット,オススメ度
1,記事タイトル,https://note.com/user/n/xxxxx,2025-06-20 18:00:00,2548,6,健康・ライフスタイル,全世代,生産性向上,★★★
```

#### インポート手順

1. 管理画面にアクセス: http://localhost:3000/admin
2. 「CSVインポート」セクションで「ファイルを選択」をクリック
3. `C:\MT\MT.csv`を選択
4. 「アップロード」ボタンをクリック
5. インポート結果が表示されます

**注意**:
- 既に登録されているnoteリンクの記事はスキップされます
- インポート結果には、追加件数とスキップ件数が表示されます

### 3. 記事の検索

1. 記事一覧ページにアクセス: http://localhost:3000/articles
2. 検索ボックスにキーワードを入力（タイトル、ジャンル、メリットから検索）
3. ジャンルボタンをクリックしてフィルタリング
4. 記事カードの「noteで読む」ボタンで元記事にアクセス

### 4. 記事の管理

管理画面（http://localhost:3000/admin）で以下の操作が可能：

#### 記事の編集
1. 記事一覧で「編集」ボタンをクリック
2. モーダルウィンドウで各フィールドを編集
3. 「更新」ボタンで保存

#### 記事の削除
1. 記事一覧で「削除」ボタンをクリック
2. 確認ダイアログで「OK」をクリック

#### 記事の検索
1. 検索ボックスにキーワードを入力
2. 「検索」ボタンをクリック

## 📊 データベース構造

### Article モデル

```prisma
model Article {
  id                    String   @id @default(cuid())
  rowNumber             Int      // 行番号
  title                 String   // タイトル
  noteLink              String   @unique // noteリンク（ユニーク制約）
  publishedAt           DateTime // 投稿日時
  characterCount        Int      // 文字数
  estimatedReadTime     Int      // 推定読了時間（分）
  genre                 String   // ジャンル
  targetAudience        String   // ユーザ層
  benefit               String   // メリット
  recommendationLevel   String   // オススメ度
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
}
```

## 🔧 API エンドポイント

### 記事取得
- `GET /api/articles` - 記事一覧取得（検索・フィルタリング対応）
- `GET /api/articles/[id]` - 個別記事取得

### 記事作成・更新
- `POST /api/articles` - 記事作成
- `PUT /api/articles/[id]` - 記事更新

### 記事削除
- `DELETE /api/articles/[id]` - 個別記事削除
- `DELETE /api/articles` - 全記事削除

### CSV インポート
- `POST /api/articles/import` - CSV ファイルインポート

## 🎨 技術スタック

- **フレームワーク**: Next.js 16.0.0 (App Router)
- **データベース**: SQLite (Prisma ORM)
- **スタイリング**: Tailwind CSS 4.1
- **言語**: TypeScript
- **UI通知**: Sonner

## 📝 変更履歴

### v2.0.0 - CSV管理システムへの移行
- ❌ AI機能の削除（Anthropic Claude API）
- ✅ CSVインポート機能の追加
- ✅ 記事検索・閲覧ページの追加
- ✅ 管理画面（CRUD機能）の追加
- ✅ ナビゲーションメニューの追加
- ✅ noteリンクのユニーク制約追加

## 🐛 トラブルシューティング

### CSVインポートが失敗する
- CSVファイルの文字コードがUTF-8であることを確認
- 必須列（タイトル、noteリンク）が存在することを確認
- 日付フォーマットが `YYYY-MM-DD HH:mm:ss` であることを確認

### 記事が表示されない
- データベースに記事が登録されているか確認
- ブラウザのコンソールでエラーを確認
- 開発サーバーが起動していることを確認

### 編集・削除が機能しない
- ブラウザのコンソールでエラーを確認
- データベースファイルの権限を確認

## 📞 サポート

問題が発生した場合は、以下を確認してください：
1. 開発サーバーのログ
2. ブラウザの開発者ツール（Console）
3. データベースの状態（`prisma/dev.db`）

## 🎯 今後の改善案

- [ ] ページネーション機能の追加
- [ ] 記事のお気に入り機能
- [ ] エクスポート機能（CSV、JSON）
- [ ] 高度な検索フィルター（文字数範囲、日付範囲など）
- [ ] 記事の並び替え機能
- [ ] ダークモード対応の改善
