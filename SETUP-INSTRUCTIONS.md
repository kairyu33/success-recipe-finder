# 🚀 セットアップ手順

## ⚠️ 重要: APIキーの設定が必要です

アプリケーションを使用する前に、Anthropic APIキーを設定する必要があります。

---

## 📝 ステップ1: APIキーを取得

1. **Anthropic Console**にアクセス:
   ```
   https://console.anthropic.com/settings/keys
   ```

2. **新しいAPIキーを作成**:
   - "Create Key"をクリック
   - キーの名前を入力（例: "note-hashtag-generator"）
   - キーをコピー（このキーは一度しか表示されません）

---

## 🔑 ステップ2: APIキーを設定

### 方法1: .env.localファイルを編集（推奨）

1. **ファイルを開く**:
   ```
   C:\Users\tyobi\note-hashtag-ai-generator\.env.local
   ```

2. **APIキーを貼り付け**:
   ```env
   ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
   ```
   ⚠️ `ANTHROPIC_API_KEY=` の後に、先ほどコピーしたキーを貼り付けてください

3. **ファイルを保存**

### 方法2: コマンドで設定

```bash
cd C:\Users\tyobi\note-hashtag-ai-generator
echo ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx >> .env.local
```

---

## 🔄 ステップ3: サーバーを再起動

APIキーを設定したら、サーバーを再起動してください。

### 現在のサーバーを停止

ターミナルで `Ctrl + C` を押すか、以下のコマンドを実行:

```bash
# すべてのNext.jsプロセスを停止（Windows）
taskkill /F /IM node.exe /T
```

### サーバーを起動

```bash
cd C:\Users\tyobi\note-hashtag-ai-generator
npm run dev
```

---

## ✅ ステップ4: 動作確認

1. **ブラウザでアクセス**:
   ```
   http://localhost:3000
   ```
   （ポートが異なる場合は、ターミナルに表示されているURLを使用）

2. **テスト記事を入力**:
   - 適当なテキストを入力（例: "これはテストです"）
   - 「記事を分析する」をクリック

3. **結果を確認**:
   - エラーが出なければ成功！
   - ハッシュタグやタイトルが生成されます

---

## 🎯 更新内容（v3.1）

### 1. 最大文字数の変更
- **変更前**: 10,000文字
- **変更後**: **30,000文字**
- 長い記事も分析できるようになりました

### 2. テキストフィールドの拡大
- **変更前**: 256px（固定）
- **変更後**: 400px（最小）+ 垂直リサイズ可能
- より快適に記事を入力できます

### 3. 使用モデル
- **Claude Sonnet 4.5** (`claude-sonnet-4-20250514`)
- 最新のAIモデルで高品質な分析

---

## 💰 コストについて

### 分析1回あたりのコスト

| 機能 | コスト |
|-----|--------|
| ハッシュタグ生成 | $0.001-0.003 |
| アイキャッチ | $0.002-0.005 |
| 完全分析 | $0.010-0.015 |
| SEO分析 | $0.001-0.007 |
| 記事改善 | $0.005-0.012 |

**キャッシュヒット時**: 90%削減（2回目以降の同様の分析）

### 月間コスト例

**月1,000回分析の場合**:
- 通常: 約$30
- キャッシュ最適化後: 約$9-14
- **年間削減額**: 約$200-250

---

## 🛡️ セキュリティ

### APIキーの保護

- ✅ `.env.local`はGitで追跡されません（`.gitignore`に含まれる）
- ✅ 本番環境では環境変数として設定
- ✅ キーを共有しない
- ✅ 定期的にキーをローテーション

### APIキーが漏洩した場合

1. すぐに[Anthropic Console](https://console.anthropic.com/settings/keys)で無効化
2. 新しいキーを生成
3. `.env.local`を更新

---

## 🐛 トラブルシューティング

### エラー: "API key is required"

**原因**: APIキーが設定されていない

**解決策**:
1. `.env.local`ファイルが存在するか確認
2. `ANTHROPIC_API_KEY=`の後にキーが入力されているか確認
3. サーバーを再起動

### エラー: "Invalid API key"

**原因**: APIキーが間違っている

**解決策**:
1. APIキーを再確認（コピペミスがないか）
2. Anthropic Consoleで有効なキーか確認
3. 新しいキーを生成して再設定

### エラー: "Article text is too long"

**原因**: 30,000文字を超えている

**解決策**:
1. 記事を分割して分析
2. 必要に応じて文字数制限を上げる

### サーバーが起動しない

**原因**: ポート競合またはロックファイル

**解決策**:
```bash
# ロックファイル削除
cd C:\Users\tyobi\note-hashtag-ai-generator
rm -rf .next/dev/lock

# サーバー再起動
npm run dev
```

---

## 📞 サポート

問題が解決しない場合:

1. **ログを確認**: 開発者ツール（F12）のConsoleタブ
2. **ドキュメント**: プロジェクト内の各種.mdファイル
3. **Anthropic公式**: https://docs.anthropic.com/

---

## 🎉 準備完了！

APIキーを設定したら、すべての機能が使用可能です:

- ✅ ハッシュタグ自動生成（20個）
- ✅ タイトル提案（5案）
- ✅ アイキャッチ画像提案
- ✅ 記事分析（学び、メリット、推奨読者）
- ✅ SEO最適化分析 ⭐
- ✅ 記事改善提案 ⭐
- ✅ 分析履歴管理 ⭐
- ✅ 多形式エクスポート ⭐

最大30,000文字の記事を分析して、note.comでの成功を目指しましょう！

---

**更新日**: 2025年10月26日
**バージョン**: 3.1
